var HTMLGraphView=function(a,b){this.container=a;this.frameLeft=0;this.frameTop=0;this.skewView=b;this.skewBase=0;this.skewX=1;this.skewY=1;this["nodes"]={};this["edges"]={};this.defaultEdgeProperties={pixelColor:"#c4c4c4",pixelWidth:"2px",pixelHeight:"2px",pixels:4}};HTMLGraphView.prototype.setSize=function(d,c,a,b){this.frameLeft=d;this.frameTop=c;this.frameWidth=a;this.frameHeight=b;this.centerX=parseInt(a/2);this.centerY=parseInt(b/2);if(this.skewView&&this.skewBase){this.skewX=this.frameWidth/this.skewBase;this.skewY=this.frameHeight/this.skewBase}else{this.skewX=1;this.skewY=1}};HTMLGraphView.prototype.addNode=function(d,c,b,a){this.container.appendChild(c);c.style.zIndex=10;if(b==null){b=parseInt(c.offsetWidth/2)}if(a==null){a=parseInt(c.offsetHeight/2)}this.nodes[d.id]={domElement:c,centerX:b,centerY:a};c.style.left="0px";c.style.top="0px";this.drawNode(d);return c};HTMLGraphView.prototype.removeNode=function(c){if(c){var b=this.nodes[c.id].domElement;this.container.removeChild(b);for(var a in this.edges[c.id]){this.removeEdge(this.edges[c.id][a])}for(var a in this.edges){if(this.edges[a][c.id]){this.removeEdge(this.edges[a][c.id])}}delete this.nodes[c.id]}};HTMLGraphView.prototype.addEdge=function(d,b,e){if(!this["edges"][d.id]){this["edges"][d.id]={}}if(!this["edges"][d.id][b.id]){var i=new Array();if(!e){e=this.defaultEdgeProperties}var a=e.pixels;var f=[];for(var h=0,g=a;h<g;h++){var c=document.createElement("div");c.style.width=e.pixelWidth;c.style.height=e.pixelHeight;c.style.backgroundColor=e.pixelColor;c.style.position="absolute";c.innerHTML="<img height=1 width=1/>";i.push(c);this.container.appendChild(c)}this["edges"][d.id][b.id]={source:d,target:b,edge:i};return i}else{return this["edges"][d.id][b.id].edge}};HTMLGraphView.prototype.removeEdge=function(d){var e=d.domEdge;var b=d.source;var a=d.target;for(var c=0;c<d.edge.length;c++){this.container.removeChild(d.edge[c])}delete this["edges"][b.id][a.id]};HTMLGraphView.prototype.drawNode=function(f){var a=this["nodes"][f.id];if(a){var c=a.domElement;c.style.left=(f.positionX*this.skewX)-a.centerX+this.centerX+"px";c.style.top=f.positionY*this.skewY-a.centerY+this.centerY+"px";var d=this.edges[f.id];for(var b in d){this.drawEdge(f,d[b]["target"])}}};HTMLGraphView.prototype.drawEdge=function(g,f){var i=g.positionX-f.positionX;var h=g.positionY-f.positionY;if(i==0&&h==0){return}var a=Math.sqrt(i*i+h*h);var c=this["edges"][g.id][f.id]["edge"];for(var e=0,d=c.length;e<d;e++){var b=(a/d)*e;c[e].style.left=parseInt(g.positionX+(-1)*b*(i/a))*this.skewX+this.centerX+"px";c[e].style.top=parseInt(g.positionY+(-1)*b*(h/a))*this.skewY+this.centerY+"px"}};HTMLGraphView.prototype.clear=function(){for(var d in this.edges){for(var c in this.edges[d]){for(var b=0,a=this.edges[d][c].edge.length;b<a;b++){this.container.removeChild(this.edges[d][c].edge[b])}}}this.edges={};for(var f in this.nodes){this.container.removeChild(this.nodes[f].domElement)}this.nodes={}};