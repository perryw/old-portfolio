<div class='thumbnail'>
	<% if img = Resource.find(index.key_resource_id) rescue nil -%>
		<% if img.image? || img.pdf? -%>
			<%= link_to image_tag(img.public_filename(:thumb)), 
					image_path(img.public_filename(:lightview)), 
					{:class =>'lightview', :rel => 'set[myset]', 
						:id => "#{index.class.to_s}_#{index.id}", :title => "#{index.name} :: #{index.description} #{link_to 'More Detail', url_for(index)}"} %>
		<% elsif img.has_slideshare -%>
			<%= link_to image_tag('slideshare_200x50.png'), img.url, 
				{ :class=>'lightview', :rel => 'set[myset]', :id => "#{index.class.to_s}_#{index.id}", 
					:title => "#{index.name} :: #{index.description}"} %>
		<% end -%>
	<% else #if !img.blank? # not an image...probably slideshare-%>
		<%= link_to image_tag('/images/no_image.png'), url_for(:action=>'show', :controller => index.class.to_s.tableize, :id=>index.id, :ignore_layout=>true),
				{:class => 'lightview', :rel => 'set[myset]', :id => "#{index.class.to_s}_#{index.id}",
				 	:title => "#{index.name} :: #{index.description}"} %>
	<% end -%>
	<span class='gallery_tags'>
		<%=index.tag_list.collect{ |dt| (dt==index.tag_list.first ? "":", ") + link_to_function(dt, "toggleGalleryImgsByTag('#{dt}', '#{divname}')", :class => dt.tr(' -', '_')) } %>
	</span>
</div>
